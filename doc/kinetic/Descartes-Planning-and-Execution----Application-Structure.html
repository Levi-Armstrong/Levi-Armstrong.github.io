

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1. Acquire the Workspace &mdash; SphinxTest 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="SphinxTest 1.0 documentation" href="../../index.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> SphinxTest
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="ROS-Setup.html">1. Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="ROS-Setup.html#reference-example">2. Reference Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="ROS-Setup.html#further-information-and-resources">3. Further Information and Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="ROS-Setup.html#scan-n-plan-application-problem-statement">4. Scan-N-Plan Application: Problem Statement</a></li>
<li class="toctree-l1"><a class="reference internal" href="ROS-Setup.html#scan-n-plan-application-guidance">5. Scan-N-Plan Application: Guidance</a></li>
<li class="toctree-l1"><a class="reference internal" href="Create-Catkin-Workspace.html">1. Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="Create-Catkin-Workspace.html#reference-example">2. Reference Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="Create-Catkin-Workspace.html#further-information-and-resources">3. Further Information and Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="Create-Catkin-Workspace.html#scan-n-plan-application-problem-statement">4. Scan-N-Plan Application: Problem Statement</a></li>
<li class="toctree-l1"><a class="reference internal" href="Create-Catkin-Workspace.html#scan-n-plan-application-guidance">5. Scan-N-Plan Application: Guidance</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">SphinxTest</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
    <li>1. Acquire the Workspace</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/doc/kinetic/Descartes-Planning-and-Execution----Application-Structure.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <blockquote>
<div>In this exercise, we'll take a look at all the packages and files that will be used during the completion of these exercises.</div></blockquote>
<div class="section" id="acquire-the-workspace">
<span id="acquire-the-workspace"></span><h1>1. Acquire the Workspace<a class="headerlink" href="#acquire-the-workspace" title="Permalink to this headline">¶</a></h1>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">industrial_training</span><span class="o">/</span><span class="n">exercises</span><span class="o">/</span><span class="n">Descartes_Planning_and_Execution</span>
<span class="n">cp</span> <span class="o">-</span><span class="n">r</span> <span class="n">template_ws</span> <span class="o">~/</span><span class="n">descartes_ws</span>
<span class="n">cd</span> <span class="o">~/</span><span class="n">descartes_ws</span><span class="o">/</span><span class="n">src</span>
<span class="n">catkin_init_workspace</span>
<span class="n">cd</span> <span class="o">..</span>
<span class="n">rosinstall</span> <span class="n">src</span>
<span class="n">catkin</span> <span class="n">build</span>
<span class="n">source</span> <span class="n">devel</span><span class="o">/</span><span class="n">setup</span><span class="o">.</span><span class="n">bash</span>
</pre></div>
</div>
</div>
<div class="section" id="list-all-the-packages-in-the-application">
<span id="list-all-the-packages-in-the-application"></span><h1>2. List All the Packages in the Application<a class="headerlink" href="#list-all-the-packages-in-the-application" title="Permalink to this headline">¶</a></h1>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">descartes_ws</span><span class="o">/</span><span class="n">src</span>
<span class="n">ls</span> <span class="o">-</span><span class="n">la</span>
</pre></div>
</div>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">plan_and_run</span></code> :           Contains the source code for the <code class="docutils literal"><span class="pre">plan_and_run</span></code> application.  You'll be completing the exercises by editing source files in this package</li>
<li><code class="docutils literal"><span class="pre">ur5_demo_moveit_config</span></code> : Contains support files for planning and execution robot motions with Moveit.  This package was generated with the Moveit Setup Assistant</li>
<li><code class="docutils literal"><span class="pre">ur5_demo_support</span></code> :       Provides the robot definition as a URDF file.  This URDF is loaded at run time by our <code class="docutils literal"><span class="pre">plan_and_run</span></code> application.</li>
<li><code class="docutils literal"><span class="pre">ur5_demo_descartes</span></code> :     Provides a custom Descartes Robot Model for the UR5 arm.  It uses a Inverse-Kinematics closed form solution; which is significantly faster than the numerical approach used by the <strong>MoveitStateAdapter</strong>.</li>
</ul>
</div>
<div class="section" id="the-plan-and-run-package">
<span id="the-plan-and-run-package"></span><h1>3. The <code class="docutils literal"><span class="pre">plan_and_run</span></code> package<a class="headerlink" href="#the-plan-and-run-package" title="Permalink to this headline">¶</a></h1>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">roscd</span> <span class="n">plan_and_run</span>
<span class="n">ls</span> <span class="o">-</span><span class="n">la</span>
</pre></div>
</div>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">src</span></code> :     Application source files.</li>
<li><code class="docutils literal"><span class="pre">src/demo_application.cpp</span></code> : A class source file that contains the application implementation code.</li>
<li><code class="docutils literal"><span class="pre">src/plan_and_run.cpp</span></code>     : The application main access point. It invokes all the tasks in the application and wraps them inside the &quot;<code class="docutils literal"><span class="pre">main</span></code>&quot; routine.</li>
<li><code class="docutils literal"><span class="pre">src/tasks</span></code>                : A directory that contains all of the source files that you'll be editing or completing as you make progress through the exercises.</li>
<li><code class="docutils literal"><span class="pre">include</span></code> : Header files</li>
<li><code class="docutils literal"><span class="pre">include/plan_and_run/demo_application.h</span></code> : Defines the application skeleton and provides a number of global variables for passing data at various points in the exercises.</li>
<li><code class="docutils literal"><span class="pre">launch</span></code>: Launch files needed to run the application</li>
<li><code class="docutils literal"><span class="pre">launch/demo_setup.launch</span></code> : Loads <code class="docutils literal"><span class="pre">roscore</span></code>, <code class="docutils literal"><span class="pre">moveit</span></code> and the runtime resources needed by our application.</li>
<li><code class="docutils literal"><span class="pre">launch/demo_run.launch</span></code> : Starts our application main executable as a ROS node.</li>
<li><code class="docutils literal"><span class="pre">config</span></code>: Directory that contains non-critical configuration files.</li>
</ul>
</div>
<div class="section" id="main-application-source-file">
<span id="main-application-source-file"></span><h1>4. Main Application Source File<a class="headerlink" href="#main-application-source-file" title="Permalink to this headline">¶</a></h1>
<p>In the &quot;<code class="docutils literal"><span class="pre">plan_and_run/src/plan_and_run_node.cpp</span></code>&quot; you'll find the following code:</p>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span><span class="kt">char</span><span class="o">**</span> <span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">ros</span><span class="o">::</span><span class="n">init</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="n">argv</span><span class="p">,</span><span class="s">&quot;plan_and_run&quot;</span><span class="p">);</span>
  <span class="n">ros</span><span class="o">::</span><span class="n">AsyncSpinner</span> <span class="n">spinner</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
  <span class="n">spinner</span><span class="p">.</span><span class="n">start</span><span class="p">();</span>

  <span class="c1">// creating application</span>
  <span class="n">plan_and_run</span><span class="o">::</span><span class="n">DemoApplication</span> <span class="n">application</span><span class="p">;</span>

  <span class="c1">// loading parameters</span>
  <span class="n">application</span><span class="p">.</span><span class="n">loadParameters</span><span class="p">();</span>

  <span class="c1">// initializing ros components</span>
  <span class="n">application</span><span class="p">.</span><span class="n">initRos</span><span class="p">();</span>

  <span class="c1">// initializing descartes</span>
  <span class="n">application</span><span class="p">.</span><span class="n">initDescartes</span><span class="p">();</span>

  <span class="c1">// moving to home position</span>
  <span class="n">application</span><span class="p">.</span><span class="n">moveHome</span><span class="p">();</span>

  <span class="c1">// generating trajectory</span>
  <span class="n">plan_and_run</span><span class="o">::</span><span class="n">DescartesTrajectory</span> <span class="n">traj</span><span class="p">;</span>
  <span class="n">application</span><span class="p">.</span><span class="n">generateTrajectory</span><span class="p">(</span><span class="n">traj</span><span class="p">);</span>


  <span class="c1">// planning robot path</span>
  <span class="n">plan_and_run</span><span class="o">::</span><span class="n">DescartesTrajectory</span> <span class="n">output_path</span><span class="p">;</span>
  <span class="n">application</span><span class="p">.</span><span class="n">planPath</span><span class="p">(</span><span class="n">traj</span><span class="p">,</span><span class="n">output_path</span><span class="p">);</span>

  <span class="c1">// running robot path</span>
  <span class="n">application</span><span class="p">.</span><span class="n">runPath</span><span class="p">(</span><span class="n">output_path</span><span class="p">);</span>

  <span class="c1">// exiting ros node</span>
  <span class="n">spinner</span><span class="p">.</span><span class="n">stop</span><span class="p">();</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In short, this program will run through each exercise by calling the corresponding function from the <code class="docutils literal"><span class="pre">application</span></code> object.  For instance, in order to initialize Descartes the program calls <code class="docutils literal"><span class="pre">application.iniDescartes()</span></code>.  Thus each exercise consists of editing the source file where that exercise is implemented, so for <code class="docutils literal"><span class="pre">application.initDescartes()</span></code> you'll be editing the <code class="docutils literal"><span class="pre">plan_and_run/src/tasks/init_descartes.src</span></code> source file.</p>
</div>
<div class="section" id="the-demoapplication-class">
<span id="the-demoapplication-class"></span><h1>5. The DemoApplication Class<a class="headerlink" href="#the-demoapplication-class" title="Permalink to this headline">¶</a></h1>
<p>In the header file &quot;<code class="docutils literal"><span class="pre">plan_and_run/include/plan_and_run/demo_application.h</span></code>&quot; you'll find the definition for the application's main class along with several support constructs. Some of the important components to take notice of are as follows:</p>
<ul class="simple">
<li>Program Variables: Contain hard coded values that are used at various points in the application.</li>
</ul>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">ROBOT_DESCRIPTION_PARAM</span> <span class="o">=</span> <span class="s">&quot;robot_description&quot;</span><span class="p">;</span>
<span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">EXECUTE_TRAJECTORY_SERVICE</span> <span class="o">=</span> <span class="s">&quot;execute_kinematic_path&quot;</span><span class="p">;</span>
<span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">VISUALIZE_TRAJECTORY_TOPIC</span> <span class="o">=</span> <span class="s">&quot;visualize_trajectory_curve&quot;</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">double</span> <span class="n">SERVICE_TIMEOUT</span> <span class="o">=</span> <span class="mf">5.0f</span><span class="p">;</span> <span class="c1">// seconds</span>
<span class="k">const</span> <span class="kt">double</span> <span class="n">ORIENTATION_INCREMENT</span> <span class="o">=</span> <span class="mf">0.5f</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">double</span> <span class="n">EPSILON</span> <span class="o">=</span> <span class="mf">0.0001f</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">double</span> <span class="n">AXIS_LINE_LENGHT</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">double</span> <span class="n">AXIS_LINE_WIDTH</span> <span class="o">=</span> <span class="mf">0.001</span><span class="p">;</span>
<span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">PLANNER_ID</span> <span class="o">=</span> <span class="s">&quot;RRTConnectkConfigDefault&quot;</span><span class="p">;</span>
<span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">HOME_POSITION_NAME</span> <span class="o">=</span> <span class="s">&quot;home&quot;</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li>Trajectory Type: Convenience type that represents an array of Descartes Trajectory Points.</li>
</ul>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="k">typedef</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">descartes_core</span><span class="o">::</span><span class="n">TrajectoryPtPtr</span><span class="o">&gt;</span> <span class="n">DescartesTrajectory</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li><strong>DemoConfiguration Data Structure</strong>:  Provides variables whose values are initialize at run-time from corresponding ros parameters.</li>
</ul>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">DemoConfiguration</span>
<span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">group_name</span><span class="p">;</span>                 <span class="cm">/* Name of the manipulation group containing the relevant links in the robot */</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">tip_link</span><span class="p">;</span>                   <span class="cm">/* Usually the last link in the kinematic chain of the robot */</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">base_link</span><span class="p">;</span>                  <span class="cm">/* The name of the base link of the robot */</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">world_frame</span><span class="p">;</span>                <span class="cm">/* The name of the world link in the URDF file */</span>
  <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">joint_names</span><span class="p">;</span>   <span class="cm">/* A list with the names of the mobile joints in the robot */</span>


  <span class="cm">/* Trajectory Generation Members:</span>
<span class="cm">   *  Used to control the attributes (points, shape, size, etc) of the robot trajectory.</span>
<span class="cm">   *  */</span>
  <span class="kt">double</span> <span class="n">time_delay</span><span class="p">;</span>              <span class="cm">/* Time step between consecutive points in the robot path */</span>
  <span class="kt">double</span> <span class="n">foci_distance</span><span class="p">;</span>           <span class="cm">/* Controls the size of the curve */</span>
  <span class="kt">double</span> <span class="n">radius</span><span class="p">;</span>                  <span class="cm">/* Controls the radius of the sphere on which the curve is projected */</span>
  <span class="kt">int</span> <span class="n">num_points</span><span class="p">;</span>                 <span class="cm">/* Number of points per curve */</span>
  <span class="kt">int</span> <span class="n">num_lemniscates</span><span class="p">;</span>            <span class="cm">/* Number of curves*/</span>
  <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span> <span class="n">center</span><span class="p">;</span>     <span class="cm">/* Location of the center of all the lemniscate curves */</span>
  <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span> <span class="n">seed_pose</span><span class="p">;</span>  <span class="cm">/* Joint values close to the desired start of the robot path */</span>

  <span class="cm">/*</span>
<span class="cm">   * Visualization Members</span>
<span class="cm">   * Used to control the attributes of the visualization artifacts</span>
<span class="cm">   */</span>
  <span class="kt">double</span> <span class="n">min_point_distance</span><span class="p">;</span>      <span class="cm">/* Minimum distance between consecutive trajectory points. */</span>
<span class="p">};</span>
</pre></div>
</div>
<ul class="simple">
<li><strong>DemoApplication Class</strong>:  Main component of the application which provides functions for each step in our program.  It also contains several constructs that turn this application into a ROS node.</li>
</ul>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">DemoApplication</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="cm">/*  Constructor</span>
<span class="cm">   *    Creates an instance of the application class</span>
<span class="cm">   */</span>
  <span class="n">DemoApplication</span><span class="p">();</span>
  <span class="k">virtual</span> <span class="o">~</span><span class="n">DemoApplication</span><span class="p">();</span>

  <span class="cm">/* Main Application Functions</span>
<span class="cm">   *  Functions that allow carrying out the various steps needed to run a</span>
<span class="cm">   *  plan an run application.  All these functions will be invoked from within</span>
<span class="cm">   *  the main routine.</span>
<span class="cm">   */</span>

  <span class="kt">void</span> <span class="nf">loadParameters</span><span class="p">();</span>
  <span class="kt">void</span> <span class="nf">initRos</span><span class="p">();</span>
  <span class="kt">void</span> <span class="nf">initDescartes</span><span class="p">();</span>
  <span class="kt">void</span> <span class="nf">moveHome</span><span class="p">();</span>
  <span class="kt">void</span> <span class="nf">generateTrajectory</span><span class="p">(</span><span class="n">DescartesTrajectory</span><span class="o">&amp;</span> <span class="n">traj</span><span class="p">);</span>
  <span class="kt">void</span> <span class="nf">planPath</span><span class="p">(</span><span class="n">DescartesTrajectory</span><span class="o">&amp;</span> <span class="n">input_traj</span><span class="p">,</span><span class="n">DescartesTrajectory</span><span class="o">&amp;</span> <span class="n">output_path</span><span class="p">);</span>
  <span class="kt">void</span> <span class="nf">runPath</span><span class="p">(</span><span class="k">const</span> <span class="n">DescartesTrajectory</span><span class="o">&amp;</span> <span class="n">path</span><span class="p">);</span>

<span class="k">protected</span><span class="o">:</span>

  <span class="cm">/* Support methods</span>
<span class="cm">   *  Called from within the main application functions in order to perform convenient tasks.</span>
<span class="cm">   */</span>

  <span class="k">static</span> <span class="kt">bool</span> <span class="n">createLemniscateCurve</span><span class="p">(</span><span class="kt">double</span> <span class="n">foci_distance</span><span class="p">,</span> <span class="kt">double</span> <span class="n">sphere_radius</span><span class="p">,</span>
                                    <span class="kt">int</span> <span class="n">num_points</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_lemniscates</span><span class="p">,</span>
                                    <span class="k">const</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">Vector3d</span><span class="o">&amp;</span> <span class="n">sphere_center</span><span class="p">,</span>
                                    <span class="n">EigenSTL</span><span class="o">::</span><span class="n">vector_Affine3d</span><span class="o">&amp;</span> <span class="n">poses</span><span class="p">);</span>

  <span class="kt">void</span> <span class="nf">fromDescartesToMoveitTrajectory</span><span class="p">(</span><span class="k">const</span> <span class="n">DescartesTrajectory</span><span class="o">&amp;</span> <span class="n">in_traj</span><span class="p">,</span>
                                              <span class="n">trajectory_msgs</span><span class="o">::</span><span class="n">JointTrajectory</span><span class="o">&amp;</span> <span class="n">out_traj</span><span class="p">);</span>

  <span class="kt">void</span> <span class="nf">publishPosesMarkers</span><span class="p">(</span><span class="k">const</span> <span class="n">EigenSTL</span><span class="o">::</span><span class="n">vector_Affine3d</span><span class="o">&amp;</span> <span class="n">poses</span><span class="p">);</span>


<span class="k">protected</span><span class="o">:</span>

  <span class="cm">/* Application Data</span>
<span class="cm">   *  Holds the data used by the various functions in the application.</span>
<span class="cm">   */</span>
  <span class="n">DemoConfiguration</span> <span class="n">config_</span><span class="p">;</span>



  <span class="cm">/* Application ROS Constructs</span>
<span class="cm">   *  Components needed to successfully run a ros-node and perform other important</span>
<span class="cm">   *  ros-related tasks</span>
<span class="cm">   */</span>
  <span class="n">ros</span><span class="o">::</span><span class="n">NodeHandle</span> <span class="n">nh_</span><span class="p">;</span>                        <span class="cm">/* Object used for creating and managing ros application resources*/</span>
  <span class="n">ros</span><span class="o">::</span><span class="n">Publisher</span> <span class="n">marker_publisher_</span><span class="p">;</span>           <span class="cm">/* Publishes visualization message to Rviz */</span>
  <span class="n">ros</span><span class="o">::</span><span class="n">ServiceClient</span> <span class="n">moveit_run_path_client_</span><span class="p">;</span> <span class="cm">/* Sends a robot trajectory to moveit for execution */</span>



  <span class="cm">/* Application Descartes Constructs</span>
<span class="cm">   *  Components accessing the path planning capabilities in the Descartes library</span>
<span class="cm">   */</span>
  <span class="n">descartes_core</span><span class="o">::</span><span class="n">RobotModelPtr</span> <span class="n">robot_model_ptr_</span><span class="p">;</span> <span class="cm">/* Performs tasks specific to the Robot</span>
<span class="cm">                                                     such IK, FK and collision detection*/</span>
  <span class="n">descartes_planner</span><span class="o">::</span><span class="n">SparsePlanner</span> <span class="n">planner_</span><span class="p">;</span>      <span class="cm">/* Plans a smooth robot path given a trajectory of points */</span>

<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="application-launch-file">
<span id="application-launch-file"></span><h1>6. Application Launch File<a class="headerlink" href="#application-launch-file" title="Permalink to this headline">¶</a></h1>
<p>This file starts our application as a ROS node and loads up the necessary parameters into the ROS parameter server. Observe how this is done by opening the &quot;<code class="docutils literal"><span class="pre">plan_and_run/launch/demo_run.launch</span></code>&quot; file:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;launch&gt;</span>
  <span class="nt">&lt;node</span> <span class="na">name=</span><span class="s">&quot;plan_and_run_node&quot;</span> <span class="na">type=</span><span class="s">&quot;plan_and_run_node&quot;</span> <span class="na">pkg=</span><span class="s">&quot;plan_and_run&quot;</span> <span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;group_name&quot;</span> <span class="na">value=</span><span class="s">&quot;manipulator&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;tip_link&quot;</span> <span class="na">value=</span><span class="s">&quot;tool&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;base_link&quot;</span> <span class="na">value=</span><span class="s">&quot;base_link&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;world_frame&quot;</span> <span class="na">value=</span><span class="s">&quot;world&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;trajectory/time_delay&quot;</span> <span class="na">value=</span><span class="s">&quot;0.1&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;trajectory/foci_distance&quot;</span> <span class="na">value=</span><span class="s">&quot;0.07&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;trajectory/radius&quot;</span> <span class="na">value=</span><span class="s">&quot;0.08&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;trajectory/num_points&quot;</span> <span class="na">value=</span><span class="s">&quot;200&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;trajectory/num_lemniscates&quot;</span> <span class="na">value=</span><span class="s">&quot;4&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;rosparam</span> <span class="na">param=</span><span class="s">&quot;trajectory/center&quot;</span><span class="nt">&gt;</span>[0.36, 0.2, 0.1]<span class="nt">&lt;/rosparam&gt;</span>
    <span class="nt">&lt;rosparam</span> <span class="na">param=</span><span class="s">&quot;trajectory/seed_pose&quot;</span><span class="nt">&gt;</span>[0.0, -1.03, 1.57 , -0.21, 0.0, 0.0]<span class="nt">&lt;/rosparam&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;visualization/min_point_distance&quot;</span> <span class="na">value=</span><span class="s">&quot;0.02&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/node&gt;</span>
<span class="nt">&lt;/launch&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li>Some of the important parameters are explained as follows:</li>
<li>group_name: A namespace that points to the list of links in the robot that are included in the arm's kinematic chain (base to end-of-tooling links).  This list is defined in the <code class="docutils literal"><span class="pre">ur5_demo_moveit_config</span></code> package.</li>
<li>tip_link: Name of the last link in the kinematic chain, usually the tool link.</li>
<li>base_link: Name for the base link of the robot.</li>
<li>world_frame: The absolute coordinate frame of reference for all the objects defined in the planning environment.</li>
<li>The parameters under the &quot;<code class="docutils literal"><span class="pre">trajectory</span></code>&quot; namespace are used to generate the trajectory that is feed into the Descartes planner.</li>
<li>trajectory/seed_pose: This is of particular importance because it is used to indicate preferred start and end joint configurations of the robot when planning the path.  If a ''seed_pose'' wasn't specified then planning would take longer since multiple start and end joint configurations would have to be taken into account, leading to multiple path solutions that result from combining several start and end poses.</li>
</ul>
<p><center></p>
<p>| [[&lt; Prev|Descartes-Planning-and-Execution---Introduction]] | [[Next &gt;|Descartes-Planning-and-Execution-General-Instructions]] |
|:---  | ---:|</p>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Levi Armstrong.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>